# CryptoWallet Backend

Проект для изучения современных технологий backend разработки. Реализует криптовалютный кошелек с функционалом управления аккаунтами, кошельками и транзакциями.

## Что делает программа

Программа предоставляет REST API для управления криптовалютными кошельками:

- Регистрация и аутентификация пользователей с JWT токенами
- Создание и управление криптовалютными кошельками
- Отправка и получение криптовалют
- История транзакций
- P2P обмен между пользователями
- Интеграция с блокчейнами (Bitcoin, Ethereum, Solana)
- Мониторинг и метрики в реальном времени

## Архитектура

Проект построен на микросервисной архитектуре с использованием Clean Architecture:

```
cmd/
├── api-gateway/          # Точка входа, роутинг и middleware
├── wallet-service/       # Управление кошельками
├── transaction-service/  # Обработка транзакций
├── p2p-service/         # P2P обмен
└── exchange-service/    # Криптовалютный обмен

internal/
├── api-gateway/
│   ├── domain/          # Бизнес-логика (сущности, интерфейсы)
│   ├── infrastructure/  # Внешние системы (БД, кэш, блокчейн)
│   └── delivery/        # HTTP обработчики
├── wallet/              # Сервис кошельков
├── transaction/         # Сервис транзакций
└── ...

pkg/                     # Общие компоненты
├── logger/              # Структурированное логирование
├── metrics/             # Метрики Prometheus
├── kafka/               # Event streaming
├── redis/               # Кэширование
└── postgres/            # База данных
```

## Технологии

### Основной стек
- **Go 1.23** - основной язык программирования
- **Gin** - HTTP фреймворк для REST API
- **PostgreSQL** - основная база данных для пользователей и транзакций
- **Redis** - кэширование и сессии
- **Apache Kafka** - event-driven коммуникация между сервисами

### Мониторинг и наблюдаемость
- **Prometheus** - сбор метрик
- **Grafana** - визуализация метрик и дашборды
- **Zerolog** - структурированное логирование

### Инфраструктура
- **Docker Compose** - локальная разработка
- **golang-migrate** - миграции базы данных
- **JWT** - аутентификация и авторизация

## Запуск

1. Установите зависимости:
```bash
go mod download
```

2. Запустите инфраструктуру:
```bash
make up
```

3. Запустите API Gateway:
```bash
go run cmd/api-gateway/main.go
```

4. Проверьте здоровье:
```bash
curl http://localhost:8080/health
```

## API Endpoints

### Аутентификация
- `POST /api/v1/auth/register` - регистрация пользователя
- `POST /api/v1/auth/login` - вход в систему

### Кошельки
- `GET /api/v1/wallets` - получение кошельков пользователя
- `POST /api/v1/wallets` - создание нового кошелька

### Мониторинг
- `GET /health` - проверка здоровья сервиса
- `GET /metrics` - метрики Prometheus

## Разработка

### Структура проекта
Проект следует принципам Clean Architecture:
- Domain слой содержит бизнес-логику и интерфейсы
- Infrastructure слой реализует внешние зависимости
- Delivery слой обрабатывает HTTP запросы

### Тестирование
```bash
# Unit тесты
go test ./...

# Интеграционные тесты
go test -tags=integration ./...
```

### Миграции
```bash
# Создание новой миграции
migrate create -ext sql -dir migrations -seq add_users_table

# Применение миграций
migrate -path migrations -database "postgres://user:password@localhost/dbname?sslmode=disable" up
```

## Цели проекта

- Изучение современных подходов к backend разработке
- Практика работы с микросервисной архитектурой
- Освоение event-driven подходов
- Реализация мониторинга
- Применение BestPractice Go разработки